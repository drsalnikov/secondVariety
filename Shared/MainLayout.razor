@inherits LayoutComponentBase
@using Microsoft.AspNetCore.Components.Authorization
@inject NavigationManager nav

<PageTitle>Второй вариант</PageTitle>

<div class="page">

    <AuthorizeView Roles="Administrator, Manager, Worker">
        <Authorized>
            <div class="sidebar">
                <NavMenu />
            </div>

            <main>
                <article class="content px-4">
                    @Body
                </article>

                <RadzenDialog />
                <RadzenNotification />
                <RadzenContextMenu />
                <RadzenTooltip />
            </main>
        </Authorized>
        <NotAuthorized>
            Требуется авторизация
        </NotAuthorized>
    </AuthorizeView>


</div>

      @code {
               [CascadingParameter]
                private Task<AuthenticationState> authenticationStateTask { get; set; }
                protected override async Task OnInitializedAsync()
                {
                    var autsk = (await authenticationStateTask) ;
                    var user = autsk.User;
                    if(!user.Identity.IsAuthenticated)
                        nav.NavigateTo("/Identity/Account/Login",true) ;
                }
            }
